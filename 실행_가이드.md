# 🐛 NEST 곤충생태지도 - 실행 가이드

## 📋 완성된 기능
✅ **AI 곤충 탐지**: YOLOv8 기반 자동 탐지  
✅ **계층적 분류**: 목→과→속→종 단계별 분류  
✅ **위험도 평가**: 5단계 위험도 분석  
✅ **상세 정보**: 생태학적 특성 제공  
✅ **인터랙티브 UI**: 바운딩 박스 편집 가능  

## 🚀 실행 방법

### 1단계: 환경 설정
```bash
# 가상환경 활성화 (이미 설정된 경우)
conda activate insect

# 또는 새로 설치하는 경우
pip install flask ultralytics torch torchvision efficientnet-pytorch pillow opencv-python numpy pathlib
```

### 2단계: 실행
```bash
cd C:\Users\User\Desktop\INSECT\NEST_Project_Complete\NEST_Project_Complete
python app.py
```

### 3단계: 브라우저 접속
```
http://localhost:8080
```

## 🎯 사용법

### 기본 워크플로우
1. **사진 업로드**: 드래그&드롭 또는 파일 선택
2. **곤충 탐지**: 자동으로 바운딩 박스 생성
3. **박스 조정**: 필요시 위치/크기 수정
4. **분류 실행**: "확인 및 분류 진행" 버튼 클릭
5. **결과 확인**: 분류, 위험도, 정보 확인

### 인터랙티브 기능
- **바운딩 박스 이동**: 드래그로 위치 조정
- **크기 조정**: 모서리 드래그로 크기 변경
- **실시간 좌표**: 편집 내용 즉시 반영

## 📊 분류 시스템

### 계층적 분류
```
목 분류 (24개 목)
├── 파리목 → 털파리과 → Plecia속 → Plecia종
└── 벌목 → 말벌과 → Vespa속 → Vespa종
```

### 위험도 등급
- 🟢 **안전**: 무해한 종
- 🟡 **주의**: 경미한 위험
- 🟠 **경고**: 중간 위험
- 🔴 **위험**: 높은 위험
- ⚫ **극위험**: 매우 위험

## 📁 프로젝트 구조
```
NEST_Project_Complete/
├── app.py                 # 메인 Flask 앱
├── utils/
│   ├── detector.py        # YOLOv8 탐지기
│   ├── classifier.py      # EfficientNet 분류기
│   ├── hierarchical_classifier.py  # 계층적 분류기
│   ├── risk_assessor.py   # 위험도 평가기
│   ├── info_provider.py   # 정보 제공자
│   └── models/           # AI 모델 파일들
├── templates/            # HTML 템플릿
├── uploads/             # 업로드된 이미지
├── results/             # 탐지 결과 이미지
└── crops/              # 크롭된 곤충 이미지
```

## 🔧 트러블슈팅

### 포트 충돌 시
```python
# app.py 마지막 줄 수정
app.run(debug=True, port=9000)  # 다른 포트 사용
```

### 모델 로딩 오류 시
- `utils/models/` 폴더에 모든 모델 파일이 있는지 확인
- 파일 권한 확인

### 메모리 부족 시
- 이미지 크기를 줄여서 업로드
- 브라우저 재시작

## 📈 성능 정보
- **탐지 정확도**: YOLOv8 기반 고정밀 탐지
- **분류 정확도**: ResNet50 기반 계층적 분류
- **처리 속도**: 이미지당 2-5초 (GPU 사용 시 더 빠름)
- **지원 형식**: JPG, PNG, WEBP, GIF

## 🎉 완성!
NEST 곤충생태지도가 완전히 구동 가능한 상태로 완성되었습니다!