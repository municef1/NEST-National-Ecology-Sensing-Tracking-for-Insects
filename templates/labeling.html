<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>곤충 데이터 라벨링</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .labeling-container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .image-upload { border: 2px dashed #ccc; padding: 40px; text-align: center; margin-bottom: 20px; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group select, .form-group input, .form-group textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .form-group small { color: #666; font-size: 12px; margin-top: 4px; display: block; }
        .image-preview { max-width: 100%; height: auto; border: 1px solid #ddd; }
        .bbox-canvas { position: relative; display: inline-block; }
        .submit-btn { background: #007bff; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; }
        .submit-btn:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div class="labeling-container">
        <h1>곤충 학습 데이터 라벨링</h1>
        
        <form id="labelingForm" enctype="multipart/form-data">
            <div class="image-upload" id="imageUpload">
                <p>이미지를 드래그하거나 클릭하여 업로드하세요</p>
                <input type="file" id="imageFile" name="image" accept="image/*" style="display: none;">
            </div>
            
            <div id="imagePreview" style="display: none;">
                <canvas id="bboxCanvas"></canvas>
            </div>
            
            <div class="form-grid">
                <div>
                    <div class="form-group">
                        <label for="reviewer">검수자:</label>
                        <input type="text" id="reviewer" name="reviewer" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="imageType">데이터 타입:</label>
                        <select id="imageType" name="image_type" required>
                            <option value="">선택하세요</option>
                            <option value="detection">탐지용</option>
                            <option value="classification">분류용</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="order">목 (Order):</label>
                        <input type="text" id="order" name="order_name" placeholder="예: Coleoptera, Lepidoptera" required>
                        <small>예시: Coleoptera(딱정벌레목), Lepidoptera(나비목), Hymenoptera(벌목)</small>
                    </div>
                </div>
                
                <div>
                    
                    <div class="form-group">
                        <label for="notes">메모:</label>
                        <textarea id="notes" name="notes" rows="3"></textarea>
                    </div>
                </div>
            </div>
            
            <div id="detectionControls" style="display: none;">
                <h3>탐지 영역 설정</h3>
                <p>이미지에서 곤충 영역을 드래그하여 선택하세요</p>
                <button type="button" id="clearBbox">영역 초기화</button>
            </div>
            
            <button type="submit" class="submit-btn">데이터 저장</button>
        </form>
    </div>
    
    <script src="{{ url_for('static', filename='labeling.js') }}"></script>
</body>
</html>